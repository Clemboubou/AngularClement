<div class="tickets">
  <h2>Gestion des Tickets</h2>

  <!-- Bouton pour afficher/masquer le formulaire -->
  <button (click)="toggleCreateTicket()">
    {{ showCreateTicket ? 'Fermer le formulaire' : 'Créer un ticket' }}
  </button>

  <!-- Formulaire de création de ticket -->
  <div *ngIf="showCreateTicket" class="create-ticket-form">
    <form (submit)="createTicket()">
      <label>
        Description :
        <textarea [(ngModel)]="newTicket.description" name="description" placeholder="Description" required></textarea>
      </label>

      <label>
        Priorité :
        <select [(ngModel)]="newTicket.priority_id" name="priority" required>
          <option *ngFor="let priority of priorities" [value]="priority.id">
            {{ priority.name }}
          </option>
        </select>
      </label>

      <button type="submit">Créer Ticket</button>
    </form>
  </div>

  <!-- Liste des Tickets -->
  <h3>Liste des Tickets</h3>
  <ul>
    <li *ngFor="let ticket of tickets">
      <div>
        <strong>Description :</strong> {{ ticket.description }}
      </div>
      <div>
        <strong>Priorité :</strong> {{ ticket.priority_id }}
      </div>
      <div>
        <strong>Statut :</strong> {{ ticket.status }}
      </div>
      <div class="ticket-actions">
        <!-- Bouton Modifier -->
        <button (click)="modifyTicket(ticket.id)">Modifier Statut</button>
        <!-- Bouton Supprimer -->
        <button (click)="deleteTicket(ticket.id)">Supprimer</button>
      </div>
    </li>
  </ul>
</div>
